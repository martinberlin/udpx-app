<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy"
          content="default-src * gap:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; img-src * data: blob: android-webview-video-poster:; style-src * 'unsafe-inline';media-src * blob:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>udpx Video to esp32</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/style-chromeapp.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="row">
                    <div class="col-xs-10">
                        <img id="udpx" src="./assets/udpx-logo.png">
                    </div>
                    <div class="col-xs-2 text-right" style="margin-top:1em">
                        <a href="#" class="button" id="v-open"><img style="border:0" src="assets/icon/cam.png" /></a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 video-container">
                        <video id="video" class="video" src="video/01.mp4" controls></video>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-8 text-center">
                        <div id="transmission">Bytes/frame should be < 1470</div>
                    </div>
                    <div class="col-xs-4 text-right">
                        <label class="file-upload btn btn-primary">
                            <input type="file" id="videofile" accept="video/*">Browse
                        </label>
                    </div>
                </div>
            </div>

            <div class="col-md-8" id="settings-container">
                <form id="main-form">

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation">
                            <a href="#vt" aria-controls="vt" role="tab" data-toggle="tab">Video</a>
                        </li>
                        <li role="presentation" class="active">
                            <a href="#ct" aria-controls="ct" role="tab" data-toggle="tab">Controller</a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane" id="vt">

                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="v_width">Pix.width</label>
                                    <input id="v_width" name="v_width"  type="number" class="form-control form-control-sm" maxlength="3" value="44"
                                           required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_height">heigth</label>
                                    <input id="v_height" name="v_height" type="number" class="form-control form-control-sm" maxlength="3" value="11"
                                           required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_units">units &#9636;</label>
                                    <input id="v_units" name="v_units" type="number" class="form-control form-control-sm" maxlength="1" value="1"
                                           required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="video_select">Examples:</label>
                                    <select id="video_select" class="form-control form-control-sm">
                                        <option value="">Select test video</option>
                                        <option value="01.mp4">Screen-test</option>
                                        <option value="02.mp4">Fading colors RGB</option>
                                        <option value="04.mp4">5,4,3 TV sample</option>
                                    </select>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_contrast">contrast</label>
                                    <input id="v_contrast" name="v_contrast" type="text" class="form-control form-control-sm"
                                           maxlength="3" size="3" value="1.4" required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_brightness">bright * N</label>
                                    <input id="v_brightness" name="v_brightness" type="number" class="form-control form-control-sm"
                                           maxlength="3" min="0.1" max="1" value="0.1" title="0.1 = 10% / 1 = 100%" required>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="millis_frame">ms/Frame</label>
                                    <input id="millis_frame" name="millis_frame" type="number" class="form-control form-control-sm"
                                           maxlength="3" value="100" required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="bro_quality">Br quality</label>
                                    <input id="bro_quality" name="bro_quality" type="number" class="form-control form-control-sm"
                                           maxlength="1" min="1" max="11" value="4" required>
                                </div>

                                <div class="col-xs-4">
                                    <canvas id="c"></canvas>
                                </div>
                            </div>

                        </div>
                        <div role="tabpanel" class="tab-pane active" id="ct">
                            <div class="form-group row">
                                <div class="col-xs-5">
                                    <label for="esp32_ip" class="col-form-label"><b>Espressif IP</b></label>
                                    <input id="esp32_ip" name="esp32_ip" type="text" class="col-xs-10 form-control form-control-sm" maxlength="15"
                                           value="192.168.0.">
                                </div>
                                <div class="col-xs-3">
                                    <label for="udp_port" class="col-form-label">Port</label>
                                    <input id="udp_port" name="udp_port" type="text" class="form-control form-control-sm" maxlength="5" size="5"
                                           value="1234">
                                </div>
                                <div class="col-xs-4">
                                    <label for="protocol" class="col-form-label">Protocol</label>
                                    <select id="protocol" class="form-control form-control-sm">
                                        <option value="pixels">Pixels</option>
                                        <option value="pixbro" selected>Pixels Brotli</option>
                                        <option value="rgb888">RGB888</option>
                                        <option value="bro888">BRO888</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12">
                                    <small>
                                        Brotli: github.com/phiresky/rust-brotli-wasm |
                                        <a href="http://udpx.fasani.de">ESP32 Firmware</a> App version: <div id="version"></div>
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                
            </form>
            </div>

        </div>
        </div>
    
        <!--<script src="cordova.js"></script>-->
        <script src="js/bootstrap-native.min.js"></script>
        <script src="js/brotli-wasm.js"></script>
        <script src="js/brotli-bootstrap.js"></script>
        <script type="text/javascript" src="js/chromeapp-canvas.js"></script>
</body>

</html>
