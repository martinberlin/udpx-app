<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy"
          content="default-src * gap:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; img-src * data: blob: android-webview-video-poster:; style-src * 'unsafe-inline';media-src * blob:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>udpx Video</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./css/style-chromeapp.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-xs-10">
                        <img id="udpx" src="./assets/udpx-logo.png">
                    </div>
                    <div class="col-xs-2 text-right" style="margin-top:1em">
                        <a href="#" class="button" id="v-open">
                            <svg class="svg-icon" viewBox="0 0 20 20" width="32">
                                <path d="M10,6.536c-2.263,0-4.099,1.836-4.099,4.098S7.737,14.732,10,14.732s4.099-1.836,4.099-4.098S12.263,6.536,10,6.536M10,13.871c-1.784,0-3.235-1.453-3.235-3.237S8.216,7.399,10,7.399c1.784,0,3.235,1.452,3.235,3.235S11.784,13.871,10,13.871M17.118,5.672l-3.237,0.014L12.52,3.697c-0.082-0.105-0.209-0.168-0.343-0.168H7.824c-0.134,0-0.261,0.062-0.343,0.168L6.12,5.686H2.882c-0.951,0-1.726,0.748-1.726,1.699v7.362c0,0.951,0.774,1.725,1.726,1.725h14.236c0.951,0,1.726-0.773,1.726-1.725V7.195C18.844,6.244,18.069,5.672,17.118,5.672 M17.98,14.746c0,0.477-0.386,0.861-0.862,0.861H2.882c-0.477,0-0.863-0.385-0.863-0.861V7.384c0-0.477,0.386-0.85,0.863-0.85l3.451,0.014c0.134,0,0.261-0.062,0.343-0.168l1.361-1.989h3.926l1.361,1.989c0.082,0.105,0.209,0.168,0.343,0.168l3.451-0.014c0.477,0,0.862,0.184,0.862,0.661V14.746z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4" id="video-c">
                <div class="row">
                    <div class="col-xs-12 video-container">
                        <video id="video" class="video" src="video/01.mp4" controls></video>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-8 text-center">
                        <div id="transmission">Bytes/frame should be < 1470</div>
                    </div>
                    <div class="col-xs-4 text-right">
                        <label class="file-upload btn btn-primary">
                            <input type="file" id="videofile" accept="video/*">Browse
                        </label>
                    </div>
                </div>
            </div>

            <div class="col-md-8" id="settings-container">
                <form id="main-form">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist" id="udpx-tab">
                        <li role="presentation">
                            <a href="#vt" id="vt-tab" role="tab" data-height="true" data-toggle="tab" aria-controls="vt" aria-expanded="false">
                            Video
                            </a>
                        </li>
                        <li role="presentation" >
                            <a href="#ct" id="ct-tab" role="tab" data-height="true" data-toggle="tab" aria-controls="ct" aria-expanded="true">
                            Controller
                        </a>
                        </li>
                        <li role="presentation" class="active">
                            <a href="#bt" id="ble-tab" role="tab" data-height="true" data-toggle="tab" aria-controls="bt" aria-expanded="false">
                            Config
                            </a>
                        </li>
                        <li role="presentation">
                            <a href="#wt" id="wi-tab" role="tab" data-height="true" data-toggle="tab" aria-controls="wi" aria-expanded="false">
                                +
                            </a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane" id="vt">

                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="v_width">Pix.width</label>
                                    <input id="v_width" name="v_width"  type="number" class="form-control form-control-sm" maxlength="3" value="44"
                                           required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_height">heigth</label>
                                    <input id="v_height" name="v_height" type="number" class="form-control form-control-sm" maxlength="3" value="11"
                                           required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_units">units &#9636;</label>
                                    <input id="v_units" name="v_units" type="number" class="form-control form-control-sm" maxlength="1" value="1"
                                           required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="video_select">Examples:</label>
                                    <select id="video_select" class="form-control form-control-sm">
                                        <option value="">Select test video</option>
                                        <option value="01.mp4">Screen-test</option>
                                        <option value="02.mp4">Fading colors RGB</option>
                                        <option value="04.mp4">5,4,3 TV sample</option>
                                    </select>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_contrast">contrast</label>
                                    <input id="v_contrast" name="v_contrast" type="text" class="form-control form-control-sm"
                                           maxlength="3" size="3" value="1.4" required>
                                </div>
                                <div class="col-xs-4">
                                    <label for="v_brightness">bright * N</label>
                                    <input id="v_brightness" name="v_brightness" type="number" class="form-control form-control-sm"
                                           maxlength="3" min="0.1" max="1" value="0.1" title="0.1 = 10% / 1 = 100%" required>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-4">
                                    <label for="millis_frame">ms/Frame</label>
                                    <input id="millis_frame" name="millis_frame" type="number" class="form-control form-control-sm"
                                           maxlength="3" value="100" required>
                                </div>

                                <div class="col-xs-4">
                                    <label for="bro_quality">Br quality</label>
                                    <input id="bro_quality" name="bro_quality" type="number" class="form-control form-control-sm"
                                           maxlength="1" min="1" max="11" value="4" required>
                                </div>

                                <div class="col-xs-4">
                                    <canvas id="c"></canvas>
                                    <input id="fps" name="fps" type="hidden" class="form-control form-control-sm" maxlength="4">
                                </div>
                            </div>

                        </div>
                        <div role="tabpanel" class="tab-pane " id="ct">
                            <div class="form-group row">
                                <div class="col-xs-5">
                                    <label for="esp32_ip" class="col-form-label"><b>Espressif IP</b></label>
                                    <input id="esp32_ip" name="esp32_ip" type="text" class="col-xs-10 form-control form-control-sm" maxlength="15"
                                           value="192.168.0.">
                                </div>
                                <div class="col-xs-3">
                                    <label for="udp_port" class="col-form-label">Port</label>
                                    <input id="udp_port" name="udp_port" type="text" class="form-control form-control-sm" maxlength="5" size="5"
                                           value="1234">
                                </div>
                                <div class="col-xs-4">
                                    <label for="protocol" class="col-form-label">Protocol</label>
                                    <select id="protocol" class="form-control form-control-sm">
                                        <option value="pixels">Pixels</option>
                                        <option value="pixbro" selected>Pixels Brotli</option>
                                        <option value="rgb888">RGB888</option>
                                        <option value="bro888">BRO888</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-8">
                                    <label for="udp_text" class="col-form-label">Text message</label>
                                    <input id="udp_text" name="udp_text" type="text" class="form-control" maxlength="9"
                                           value="">
                                </div>
                                <div class="col-xs-4" style="margin-top:1.8em">
                                    <button class="form-control btn btn-default active" id="send_udp">Send UDP</button>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12">
                                    <small>
                                        Brotli: github.com/phiresky/rust-brotli-wasm |
                                        <a href="http://udpx.fasani.de">ESP32 Firmware</a> App version: <div id="version"></div>
                                    </small>
                                </div>
                            </div>
                        </div>


                        <div role="tabpanel" class="tab-pane active" id="bt">

                            <div class="form-group row">
                                <div class="col-xs-8" style="margin-top:0.8em" id="ble_msg">
                                Please turn on Bluetooth
                                </div>
                                <div class="col-xs-4">
                                    <button class="form-control btn btn-primary" id="ble_start">Scan Ble</button>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12" id="deviceList">
                                </div>
                            </div>
                        </div>

                        <div role="tabpanel" class="tab-pane" id="wt">
                            <div class="form-group row">
                                <div class="col-xs-12" id="wifi_msg">
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12">
                                    <label for="wifi_ssid">WiFi SSID</label>
                                    <input id="wifi_ssid" name="wifi_ssid" type="text" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12">
                                    <label for="wifi_pass">Password</label>
                                    <input id="wifi_pass" name="wifi_pass" type="text" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12 form-check">
                                    <input id="wifi_store" name="wifi_store" type="checkbox" class="form-check-input">
                                    <label for="wifi_store" class="form-check-label">Store password in local storage</label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-6">
                                    <button class="form-control btn btn-warning" id="ble_reset">Reset ESP32</button>
                                </div>
                                <div class="col-xs-6">
                                    <button class="form-control btn btn-primary" id="ble_set_config">Send config</button>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-6">
                                    <button class="form-control btn btn-danger" id="ble_erase">Erase config</button>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-6">
                                    <button class="form-control btn btn-info" id="ble_getip">Get IP</button>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xs-12" id="wifi_foot_msg">
                                </div>
                            </div>
                        </div>


                    </div>
                
            </form>
            </div>

        </div>
        </div>
    
        <script src="cordova.js"></script>
        <script src="js/bootstrap-native.min.js"></script>
        <script src="js/brotli-wasm.js"></script>
        <script src="js/brotli-bootstrap.js"></script>
        <script src="js/app.js"></script>
</body>

</html>
